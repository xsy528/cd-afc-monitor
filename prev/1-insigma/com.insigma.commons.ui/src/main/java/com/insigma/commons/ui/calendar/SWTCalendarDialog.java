/*  * 项目:    用户界面组件 * 版本: 	2.0 * 日期: 	2010-6-25 * 作者:    姜旭锋 * Email:   jiangxufeng@zdwxjd.com * 版权所有：浙江浙大网新众合轨道交通工程有限公司 */package com.insigma.commons.ui.calendar;import java.util.Calendar;import java.util.Date;import org.eclipse.swt.SWT;import org.eclipse.swt.events.SelectionAdapter;import org.eclipse.swt.events.SelectionEvent;import org.eclipse.swt.graphics.Point;import org.eclipse.swt.layout.GridLayout;import org.eclipse.swt.widgets.Button;import org.eclipse.swt.widgets.Composite;import org.eclipse.swt.widgets.DateTime;import org.eclipse.swt.widgets.Display;import org.eclipse.swt.widgets.Shell;import com.swtdesigner.SWTResourceManager;public class SWTCalendarDialog {	private Date result;	private Shell shell;	private DateTime swtcal;	private Display display;	private Button btnOK;	public SWTCalendarDialog(Display display) {		this.display = display;		shell = new Shell(display.getActiveShell(), SWT.NONE | SWT.APPLICATION_MODAL);		shell.setLayout(new GridLayout());		shell.setBackground(Display.getCurrent().getSystemColor(SWT.COLOR_WHITE));		swtcal = new DateTime(shell, SWT.CALENDAR);		final Composite composite = new Composite(shell, SWT.NONE);		composite.setBackground(SWTResourceManager.getColor(255, 255, 255));		final GridLayout gridLayout = new GridLayout();		gridLayout.numColumns = 2;		composite.setLayout(gridLayout);		btnOK = new Button(composite, SWT.NONE);		btnOK.addSelectionListener(new SelectionAdapter() {			public void widgetSelected(SelectionEvent arg0) {				Calendar calendar = Calendar.getInstance();				calendar.set(Calendar.YEAR, swtcal.getYear());				calendar.set(Calendar.MONTH, swtcal.getMonth());				calendar.set(Calendar.DAY_OF_MONTH, swtcal.getDay());				result = calendar.getTime();				shell.close();			}		});		btnOK.setText("确  定 (&O)");		final Button btnCancel = new Button(composite, SWT.NONE);		btnCancel.addSelectionListener(new SelectionAdapter() {			public void widgetSelected(SelectionEvent arg0) {				result = null;				shell.close();			}		});		btnCancel.setText("取  消 (&X)");	}	public Date open() {		shell.pack();		shell.open();		while (!shell.isDisposed()) {			if (!display.readAndDispatch())				display.sleep();		}		return result;	}	public void setDate(Date date) {		Calendar calendar = Calendar.getInstance();		calendar.setTime(date);		swtcal.setYear(calendar.get(Calendar.YEAR));		swtcal.setMonth(calendar.get(Calendar.MONTH));		swtcal.setDay(calendar.get(Calendar.DAY_OF_MONTH));	}	public void setLocation(Point point) {		shell.setLocation(point);	}	public Point getSize() {		return shell.getSize();	}	public void close() {		shell.close();	}}